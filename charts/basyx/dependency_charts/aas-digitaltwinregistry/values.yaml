#################################################################################
 # Copyright (C) 2025 the Eclipse BaSyx Authors
 # Copyright (C) 2025 SAP SE
 #
 # Permission is hereby granted, free of charge, to any person obtaining
 # a copy of this software and associated documentation files (the
 # "Software"), to deal in the Software without restriction, including
 # without limitation the rights to use, copy, modify, merge, publish,
 # distribute, sublicense, and/or sell copies of the Software, and to
 # permit persons to whom the Software is furnished to do so, subject to
 # the following conditions:
 #
 # The above copyright notice and this permission notice shall be
 # included in all copies or substantial portions of the Software.
 #
 # THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 # EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 # MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 # NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 # LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 # OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 # WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 #
 # SPDX-License-Identifier: MIT
#################################################################################

---
imagePullSecrets: []

enabled: true

image: 
  name: eclipsebasyx/digitaltwinregistry:2.0.0-SNAPSHOT
  pullPolicy: Always

resources: {}
podAnnotations: {}

service:
  type: ClusterIP
  port: 8081

ingress:
  enabled: false
  ingressClassName: ""
  annotations: {}
  host: aas-digitaltwinregistry.local

podSecurityContext: {}

securityContext: {}

apirule:
  enabled: false
  host: aas-digitaltwinregistry.local
  methods: 
    - "GET" 
    - "HEAD" 
    - "POST" 
    - "PUT" 
    - "DELETE" 
    - "CONNECT" 
    - "OPTIONS" 
    - "TRACE"
    - "PATCH"
 
  corsPolicy: 
    allowMethods:
    - POST
    - GET
    - PUT
    - DELETE
    - PATCH
    - OPTIONS
    - HEAD
    allowOrigins:
      - regex: ".*" 
    allowCredentials: true


application: |
    basyx:
      aasdiscoveryservice:
        name: digital-twin-registry
      cors:
        allowed-methods: GET,POST,PATCH,DELETE,PUT,OPTIONS,HEAD
        allowed-origins: '*'
      aasregistry:
        feature:
          discoveryintegration:
            enabled: true
            baseUrl: http://localhost:8081
      endpoints:
        web:
          exposure:
            include: health,metrics,mappings
    
    server:
      port: 8081
    
    spring:
      profiles:
        active: logEvents,${SPRING_PROFILE:InMemory}
      main:
        allow-bean-definition-overriding: true
      application:
        name: BaSyx Digital Twin Registry
    
    description:
      profiles: https://admin-shell.io/aas/API/3/0/AssetAdministrationShellRegistryServiceSpecification/SSP-001,https://admin-shell.io/aas/API/3/0/AssetAdministrationShellRegistryServiceSpecification/SSP-002,https://admin-shell.io/aas/API/3/0/DiscoveryServiceSpecification/SSP-001
    
    logging:
      level:
        root: ${LOGGING_LEVEL:INFO}
        org.eclipse.digitaltwin.basyx: ${LOGGING_LEVEL:INFO}
    
    springdoc:
      api-docs:
        enabled: true
      swagger-ui:
        enabled: true
        path: /swagger-ui.html
        csrf:
          enabled: false
application-MongoDB: |
    spring:
      config:
        activate:
          on-profile: MongoDB
      data:
        mongodb:
          authentication-database: ${AUTHENTICATION_DATABASE:db-name}
          database: ${AUTHENTICATION_DATABASE:db-name}
          host: ${DATABASE_HOST:localhost}
          port: ${DATABASE_PORT:27017}
          username: ${DATABASE_USERNAME:db-username}
          password: ${DATABASE_PASSWORD:db-password}
    
    basyx:
      backend: MongoDB
      aasdiscoveryservice:
        mongodb:
          collectionName: ${AUTHENTICATION_DATABASE:db-name}
    
    registry:
      type: MongoDB
      discovery:
        enabled: true
application-InMemory: |
    spring:
      config:
        activate:
          on-profile: InMemory
      autoconfigure:
        exclude:
          - org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration
          - org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration
    
    basyx:
      backend: InMemory
    
    registry:
      type: InMemory
      discovery:
        enabled: true
